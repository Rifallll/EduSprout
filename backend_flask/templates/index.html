<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Daftar Beasiswa</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f7f7f7;margin:0;padding:20px}
    .wrap{max-width:900px;margin:0 auto}
    .card{background:#fff;padding:15px;margin-bottom:12px;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,.08)}
    .meta{color:#666;font-size:.9em;margin-bottom:6px}
    .search{margin-bottom:12px}
    .btn{display:inline-block;padding:6px 10px;border-radius:6px;background:#2b8cff;color:#fff;text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Daftar Beasiswa</h1>
    <div class="search">
      <input id="q" placeholder="Cari judul..." style="padding:8px;width:60%">
      <button onclick="load()" class="btn">Refresh</button>
    </div>
    <div id="list"></div>
  </div>

<script>
async function load(){
  document.getElementById('list').innerHTML = 'Loading...';
  const q = document.getElementById('q').value.toLowerCase().trim();
  const res = await fetch('/api/beasiswa');
  const data = await res.json();
  const filtered = data.filter(it => !q || it.title.toLowerCase().includes(q));
  if(filtered.length===0){ document.getElementById('list').innerHTML = '<p>Tidak ada data</p>'; return; }
  document.getElementById('list').innerHTML = filtered.map(it => `
    <div class="card">
      <div class="meta">${it.source} • ${it.date_posted || '—'}</div>
      <a href="${it.link}" target="_blank">${it.title}</a>
      ${it.excerpt ? `<p>${it.excerpt}</p>` : ''}
    </div>
  `).join('');
}
window.onload = load;
</script>
</body>
</html>